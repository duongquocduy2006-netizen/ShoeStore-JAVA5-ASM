<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">

<head>
	<meta charset="UTF-8">
	<title>Quản Lý Sản Phẩm | ShoeStore Professional</title>

	<link
		href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Poppins:wght@300;400;500;600&display=swap"
		rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

	<style>
		:root {
			--bg-body: #050505;
			--bg-card: #121212;
			--accent-red: #e50914;
			--accent-cyan: #00f2ff;
			--text-main: #ffffff;
			--border-glass: rgba(255, 255, 255, 0.08);
			--radius: 6px;
		}

		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		body {
			font-family: 'Poppins', sans-serif;
			background-color: var(--bg-body);
			color: var(--text-main);
			font-size: 14px;
		}

		h1,
		h2,
		h3,
		h4,
		h5,
		.font-oswald {
			font-family: 'Oswald', sans-serif;
			text-transform: uppercase;
			letter-spacing: 1px;
		}

		.admin-wrapper {
			display: flex;
			min-height: 100vh;
		}

		.main-content {
			flex-grow: 1;
			margin-left: 260px;
			padding: 30px 40px;
			background-image: radial-gradient(circle at 50% 0%, rgba(229, 9, 20, 0.05) 0%, transparent 40%);
			display: flex;
			flex-direction: column;
		}

		.page-header {
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			margin-bottom: 30px;
		}

		.page-title {
			font-size: 32px;
			font-weight: 700;
			margin: 0;
			line-height: 1;
		}

		.sub-title {
			font-size: 13px;
			color: var(--accent-cyan);
			font-weight: 600;
			letter-spacing: 2px;
			display: block;
			margin-bottom: 5px;
		}

		.btn-neon {
			background: var(--accent-red);
			color: white;
			border: none;
			padding: 12px 25px;
			font-family: 'Oswald', sans-serif;
			letter-spacing: 1px;
			text-transform: uppercase;
			cursor: pointer;
			transition: 0.3s;
			display: flex;
			align-items: center;
			gap: 8px;
			clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px),
					calc(100% - 10px) 100%, 0 100%, 0 10px);
			text-decoration: none;
		}

		.btn-neon:hover {
			background: #fff;
			color: #000;
			box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
		}

		.table-card {
			background: var(--bg-card);
			border: 1px solid var(--border-glass);
			border-radius: var(--radius);
			overflow: hidden;
		}

		table {
			width: 100%;
			border-collapse: collapse;
		}

		thead {
			background: rgba(255, 255, 255, 0.03);
			border-bottom: 1px solid #333;
		}

		th {
			text-align: left;
			padding: 20px;
			color: #666;
			font-size: 11px;
			text-transform: uppercase;
			font-family: 'Oswald';
		}

		td {
			padding: 20px;
			border-bottom: 1px solid rgba(255, 255, 255, 0.05);
			vertical-align: middle;
		}

		.product-item {
			display: flex;
			align-items: center;
			gap: 15px;
		}

		.product-img {
			width: 60px;
			height: 60px;
			object-fit: cover;
			border: 1px solid #333;
			border-radius: 4px;
			background: #222;
		}

		.product-name {
			font-weight: 600;
			color: var(--text-main);
			display: block;
			font-size: 15px;
			font-family: 'Oswald';
		}

		.product-id {
			font-size: 11px;
			color: #666;
		}

		.price {
			font-weight: 600;
			color: var(--accent-cyan);
			font-family: 'Oswald';
			font-size: 16px;
		}

		.status-badge {
			padding: 5px 12px;
			font-size: 10px;
			font-weight: 700;
			text-transform: uppercase;
			border: 1px solid;
			border-radius: 4px;
		}

		.status-active {
			color: #4ade80;
			border-color: rgba(74, 222, 128, 0.3);
			background: rgba(74, 222, 128, 0.1);
		}

		.action-btn {
			width: 35px;
			height: 35px;
			background: transparent;
			border: 1px solid #333;
			color: #888;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			transition: 0.3s;
			margin-left: 5px;
			text-decoration: none;
			border-radius: 4px;
		}

		.btn-edit:hover {
			border-color: var(--accent-cyan);
			color: var(--accent-cyan);
		}

		.btn-delete:hover {
			border-color: var(--accent-red);
			color: var(--accent-red);
		}
	</style>
</head>

<body>
	<div class="admin-wrapper">
		<aside th:replace="~{admin/fragments/sidebar :: sidebar}"></aside>
		<div class="main-content">
			<header th:replace="~{admin/fragments/header :: header}"></header>

			<div class="page-header" style="margin-top: 20px;">
				<div>
					<span class="sub-title"><i class="bi bi-box-seam"></i> KHO
						HÀNG</span>
					<h1 class="page-title font-oswald">DANH SÁCH SẢN PHẨM</h1>
				</div>
				<a th:href="@{/admin/products/create}" class="btn-neon"><i class="bi bi-plus-lg"></i> Thêm SP Mới</a>
			</div>

			<div class="table-card">
				<table>
					<thead>
						<tr>
							<th width="35%">Thông tin sản phẩm</th>
							<th>Danh mục</th>
							<th>Giá niêm yết</th>
							<th>Kho hàng</th>
							<th>Trạng thái</th>
							<th style="text-align: right;">Thao tác</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="p : ${products}">
							<td>
								<div class="product-item">
									<img th:src="${p.images != null && !p.images.isEmpty() ? '/images/' + p.images.iterator().next().imageUrl : 'https://ui-avatars.com/api/?name=' + (p.productName != null ? p.productName : 'S') + '&background=121212&color=00f2ff&bold=true'}"
										class="product-img" alt="Product Image">
									<div>
										<span class="product-name"
											th:text="${p.productName != null ? p.productName : 'Chưa có tên'}"></span>
										<span class="product-id"><i class="bi bi-upc-scan"></i>
											SKU: <span
												th:text="${p.productCode != null ? p.productCode : 'Chưa cập nhật'}"></span></span>
									</div>
								</div>
							</td>

							<td>
								<span style="color: #ccc"
									th:text="${p.category != null ? p.category.name : 'Chưa phân loại'}"></span>
								<br>
								<small style="color: #888; font-size: 11px;"
									th:text="${p.brandName != null ? p.brandName : 'Chưa rõ hãng'}"></small>
							</td>

							<td class="price"><span
									th:if="${p.variants != null && !p.variants.isEmpty() && p.variants.iterator().next().price != null}"
									th:text="${#numbers.formatDecimal(p.variants.iterator().next().price, 0, 'COMMA', 0, 'POINT') + ' ₫'}"></span>
								<span
									th:unless="${p.variants != null && !p.variants.isEmpty() && p.variants.iterator().next().price != null}"
									style="font-size: 13px; color: #888;">Chưa có giá</span>
							</td>

							<td style="color: #fff; font-weight: 600;"><span
									th:text="${p.variants != null && !p.variants.isEmpty() ? p.variants.size() + ' biến thể' : 'Chưa nhập kho'}"></span>
							</td>

							<td><span class="status-badge status-active"
									th:text="${p.status == 1 ? 'Đang bán' : 'Tạm ẩn'}">Đang
									bán</span></td>

							<td style="text-align: right;">
								<a th:href="@{/admin/products/detail/{id}(id=${p.id})}" class="action-btn"
									title="Xem chi tiết"
									style="color: var(--accent-cyan); border-color: var(--accent-cyan);">
									<i class="bi bi-eye"></i>
								</a>
								<a th:href="@{/admin/products/edit/{id}(id=${p.id})}" class="action-btn btn-edit"
									title="Chỉnh sửa"><i class="bi bi-pencil-square"></i></a> <a
									th:href="@{/admin/products/delete/{id}(id=${p.id})}" class="action-btn btn-delete"
									title="Xóa"
									onclick="return confirm('Xếp có chắc chắn muốn xóa sản phẩm này vĩnh viễn không?');">
									<i class="bi bi-trash"></i>
								</a>
							</td>
						</tr>

						<tr th:if="${#lists.isEmpty(products)}">
							<td colspan="6" style="text-align: center; padding: 50px; color: #555;"><i
									class="bi bi-inbox"
									style="font-size: 3rem; display: block; margin-bottom: 10px;"></i>
								Chưa có sản phẩm nào. Xếp hãy thêm sản phẩm mới nhé!</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</body>

</html>